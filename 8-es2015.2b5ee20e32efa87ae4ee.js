(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"A/lh":function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t("611t");class i{getUserLocation(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(n=>{const t=o.a.fromLatLong(n.coords.latitude,n.coords.longitude,{locationSource:"USER"});e(t)},e=>n(e),{enableHighAccuracy:!1,maximumAge:0})})}getIsPermissionGranted(){return new Promise((e,n)=>{if(navigator.permissions)return navigator.permissions.query({name:"geolocation"}).then(n=>{e("granted"===n.state)});n(new Error("Permission API is not supported"))})}}},DSOO:function(e,n,t){"use strict";t.r(n);var o=t("8Y7J");class i{}class a{}var r=t("pMnS"),c=t("iInd"),s=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;width:100%}@media screen and (max-width:750px){[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{position:relative;flex:1 1 0;overflow:hidden;max-width:27.5%;min-width:20rem}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;overflow:auto;position:relative}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;margin:0;justify-content:center;background-color:#3f4038;padding-top:.25rem;height:2.25rem}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;width:8rem;padding:.5rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;flex:0 1 auto;margin:0 .25rem;border-radius:4px 4px 0 0}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.page-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{flex:1 1 0}.page-content[_ngcontent-%COMP%]{background-color:#efebdf}"]],data:{}});function l(e){return o.Nb(0,[(e()(),o.sb(0,0,null,null,21,"div",[["class","page-container"]],null,null,null,null,null)),(e()(),o.sb(1,0,null,null,16,"div",[["class","nav-items-container"]],null,null,null,null,null)),(e()(),o.sb(2,0,null,null,7,"div",[["class","nav-item"]],null,[[null,"click"]],(function(e,n,t){var i=!0;return"click"===n&&(i=!1!==o.Db(e,3).onClick()&&i),i}),null,null)),o.rb(3,16384,[[1,4]],0,c.m,[c.l,c.a,[8,null],o.C,o.k],{routerLink:[0,"routerLink"]},null),o.Eb(4,1),o.rb(5,1720320,null,2,c.n,[c.l,o.k,o.C,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),o.Jb(603979776,1,{links:1}),o.Jb(603979776,2,{linksWithHrefs:1}),o.Eb(8,1),(e()(),o.Lb(-1,null,["Near Me"])),(e()(),o.sb(10,0,null,null,7,"div",[["class","nav-item"]],null,[[null,"click"]],(function(e,n,t){var i=!0;return"click"===n&&(i=!1!==o.Db(e,11).onClick()&&i),i}),null,null)),o.rb(11,16384,[[3,4]],0,c.m,[c.l,c.a,[8,null],o.C,o.k],{routerLink:[0,"routerLink"]},null),o.Eb(12,1),o.rb(13,1720320,null,2,c.n,[c.l,o.k,o.C,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),o.Jb(603979776,3,{links:1}),o.Jb(603979776,4,{linksWithHrefs:1}),o.Eb(16,1),(e()(),o.Lb(-1,null,["My Uploads"])),(e()(),o.sb(18,0,null,null,3,"div",[["class","page-content"]],null,null,null,null,null)),(e()(),o.sb(19,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),o.rb(20,212992,null,0,c.q,[c.b,o.O,o.j,[8,null],o.h],null,null),(e()(),o.sb(21,0,null,null,0,"div",[["class","footer"]],null,null,null,null,null))],(function(e,n){var t=e(n,4,0,"./near-me");e(n,3,0,t);var o=e(n,8,0,"active");e(n,5,0,o);var i=e(n,12,0,"./my-uploads");e(n,11,0,i);var a=e(n,16,0,"active");e(n,13,0,a),e(n,20,0)}),null)}function d(e){return o.Nb(0,[(e()(),o.sb(0,0,null,null,1,"dwu-photo-gallery",[],null,null,null,l,s)),o.rb(1,49152,null,0,i,[],null,null)],null,null)}var u=o.ob("dwu-photo-gallery",i,d,{},{},[]),g=t("SVse"),b=t("A/lh"),p=t("dNPo"),O=t("DQLy"),f=t("7bNT"),h=t("xpxz"),P=t("bqb4"),M=t("GrFz"),C=t("cxyc"),_=t("YDhq"),m=t("uaM9"),v=t("ypqk");const y=()=>Promise.all([t.e(1),t.e(5),t.e(0),t.e(27)]).then(t.bind(null,"UTLn")).then(e=>e.NearMeModuleNgFactory),j=()=>Promise.all([t.e(1),t.e(5),t.e(0),t.e(23)]).then(t.bind(null,"e/a4")).then(e=>e.MyUploadsModuleNgFactory);class x{}var L=t("NSPv");t.d(n,"PhotoGalleryModuleNgFactory",(function(){return U}));var U=o.pb(a,[],(function(e){return o.Ab([o.Bb(512,o.j,o.ab,[[8,[r.a,u]],[3,o.j],o.v]),o.Bb(4608,g.o,g.n,[o.s,[2,g.A]]),o.Bb(4608,b.a,b.a,[]),o.Bb(4608,p.a,p.a,[O.n,f.a,b.a,h.a]),o.Bb(4608,P.a,P.a,[h.a,M.a,b.a,C.a,_.a]),o.Bb(1073742336,g.c,g.c,[]),o.Bb(1073742336,m.a,m.a,[]),o.Bb(1073742336,v.a,v.a,[]),o.Bb(1073742336,c.p,c.p,[[2,c.u],[2,c.l]]),o.Bb(1073742336,x,x,[]),o.Bb(1024,O.O,(function(){return[{}]}),[]),o.Bb(1024,O.j,(function(){return[{key:"photoGallery",reducerFactory:O.s,metaReducers:[],initialState:void 0}]}),[]),o.Bb(1024,O.P,O.W,[o.p,O.O,O.j]),o.Bb(1024,O.N,(function(){return[L.a]}),[]),o.Bb(1024,O.Q,(function(e){return[e]}),[O.N]),o.Bb(1024,O.b,(function(e,n,t){return[O.X(e,n,t)]}),[o.p,O.N,O.Q]),o.Bb(1024,O.U,(function(e){return[O.H(e)]}),[O.T]),o.Bb(1073873408,O.o,O.o,[O.P,O.b,O.g,O.p,[2,O.U]]),o.Bb(1024,f.p,(function(){return[[p.a]]}),[]),o.Bb(1024,f.g,(function(){return[[]]}),[]),o.Bb(1024,f.q,(function(e,n,t){return[f.k(e,n,t)]}),[o.p,f.p,f.g]),o.Bb(1073742336,f.d,f.d,[f.e,f.q,[2,O.p],[2,O.o]]),o.Bb(1073742336,a,a,[]),o.Bb(1024,c.j,(function(){return[[{path:"",component:i,children:[{path:"near-me",loadChildren:y},{path:"my-uploads",loadChildren:j},{path:"",redirectTo:"near-me",pathMatch:"full"}]}]]}),[])])}))},NSPv:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var o=t("DQLy"),i=t("qfsr"),a=t("S9X5");const r=Object(o.w)(a.a,Object(o.z)(i.a.setUserLocation,(e,n)=>Object.assign({},e,{userLocation:n.payload})),Object(o.z)(i.a.setNearbyImagesVisible,(e,n)=>Object.assign({},e,{nearbyImagesVisible:n.payload})),Object(o.z)(i.a.setNearbyImages,(e,n)=>Object.assign({},e,{nearbyImages:n.payload})),Object(o.z)(i.a.setUserLocationPermission,(e,n)=>Object.assign({},e,{locationPermission:n.locationPermission})),Object(o.z)(i.a.setMyUploadsVisible,(e,n)=>Object.assign({},e,{myUploadsVisible:n.payload})),Object(o.z)(i.a.setMyUploads,(e,n)=>Object.assign({},e,{myUploads:n.payload})));function c(e,n){return r(e,n)}},S9X5:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));const o={nearbyImagesVisible:!1,nearbyImages:void 0,userLocation:void 0,locationPermission:void 0,myUploadsVisible:void 0,myUploads:void 0}},YZbJ:function(e,n,t){"use strict";var o=t("Z0Sn"),i=(t("7sJY"),t("BaDc"),t("DQLy"));const a=Object(i.v)("auth"),r=Object(i.y)(a,e=>e.user),c=Object(i.y)(r,e=>void 0===e),s=Object(i.y)(r,e=>null===e);t("Bhw0"),t.d(n,"a",(function(){return o.a})),t.d(n,"d",(function(){return r})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return s}))},bqb4:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t("mrSG");class i{constructor(e,n,t,o,i){this.firestore=e,this.storage=n,this.userLocationService=t,this.imageProcessing=o,this.exifService=i}deleteFile(e,n){return o.a(this,void 0,void 0,(function*(){yield this.storage.deleteFile(e),yield this.firestore.unregisterFile(e)}))}uploadFile(e,n){return o.a(this,void 0,void 0,(function*(){const t=yield this.exifService.getExifData(e),o=this.exifService.getLocationData(t)||(yield this.userLocationService.getUserLocation()),i={userId:n.uid,fileName:e.name,isUploaded:!1,locationData:Object.assign({},o)},a=yield this.firestore.insertUploadDoc(i),r=Object.assign({},i,{id:a.id}),c=yield this.imageProcessing.processImageFile(e,t),s=yield this.storage.uploadFile(c,r.id),l={downloadUrl:yield s.ref.getDownloadURL()};yield this.firestore.registerFileUploaded(r.id,l)}))}}},dNPo:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var o=t("7bNT"),i=t("DQLy"),a=t("LvDl"),r=t("Cfvw"),c=t("LRne"),s=t("eIep"),l=t("lJxs"),d=t("zp1y"),u=t("qfsr"),g=t("qDRf"),b=t("YZbJ");class p{constructor(e,n,t,p){this.store$=e,this.actions$=n,this.userLocationService=t,this.firestore=p,this.requestUserLocation$=Object(o.h)(()=>this.actions$.pipe(Object(o.j)(u.a.requestUserLocation),Object(s.a)(()=>Object(r.a)(this.userLocationService.getUserLocation()).pipe(Object(l.a)(e=>u.a.setUserLocation({payload:e})))))),this.loadNearbyLocation$=Object(o.h)(()=>this.actions$.pipe(Object(o.j)(u.a.setUserLocation,u.a.setNearbyImagesVisible),Object(d.a)(this.store$.pipe(Object(i.B)(g.e)),this.store$.pipe(Object(i.B)(g.d))),Object(s.a)(([e,n,t])=>t&&n?this.firestore.getNearbyUploads$(n).pipe(Object(l.a)(e=>{const t=Object(a.sortBy)(e,e=>Math.pow(n.latitude-e.locationData.latitude,2)+Math.pow(n.longitude-e.locationData.longitude,2));return u.a.setNearbyImages({payload:t})})):Object(c.a)(u.a.setNearbyImages({payload:void 0}))))),this.getMyUploads$=Object(o.h)(()=>this.actions$.pipe(Object(o.j)(b.a.setUser,u.a.setMyUploadsVisible),Object(d.a)(this.store$.pipe(Object(i.B)(b.d)),this.store$.pipe(Object(i.B)(g.b))),Object(s.a)(([e,n,t])=>t&&n?this.firestore.getUploadedFiles$(n).pipe(Object(l.a)(e=>u.a.setMyUploads({payload:e}))):Object(c.a)(u.a.setMyUploads({payload:[]}))))),this.checkUserLocationPermission$=Object(o.h)(()=>this.actions$.pipe(Object(o.j)(u.a.checkUserLocationPermission),Object(s.a)(()=>Object(r.a)(this.userLocationService.getIsPermissionGranted()).pipe(Object(l.a)(e=>u.a.setUserLocationPermission({locationPermission:e}))))))}}},qDRf:function(e,n,t){"use strict";t.d(n,"e",(function(){return a})),t.d(n,"d",(function(){return r})),t.d(n,"c",(function(){return c})),t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return l}));var o=t("DQLy");const i=Object(o.v)("photoGallery"),a=Object(o.y)(i,e=>e.userLocation),r=Object(o.y)(i,e=>e.nearbyImagesVisible),c=Object(o.y)(i,e=>e.nearbyImages),s=(Object(o.y)(i,e=>e.locationPermission),Object(o.y)(i,e=>e.myUploadsVisible)),l=Object(o.y)(i,e=>e.myUploads)},qfsr:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t("DQLy");let i=(()=>{class e{}return e.CATEGORY="[PHOTO_GALLERY]",e.requestUserLocation=Object(o.u)(e.CATEGORY+" REQUEST_USER_LOCATION"),e.setUserLocation=Object(o.u)(e.CATEGORY+" SET_USER_LOCATION",Object(o.A)()),e.setNearbyImagesVisible=Object(o.u)(e.CATEGORY+" SET_NEARBY_IMAGES_VISIBLE",Object(o.A)()),e.setNearbyImages=Object(o.u)(e.CATEGORY+" SET_NEARBY_IMAGES",Object(o.A)()),e.checkUserLocationPermission=Object(o.u)(e.CATEGORY+" CHECK_USER_LOCATION_PERMISSION"),e.setUserLocationPermission=Object(o.u)(e.CATEGORY+" SET_USER_LOCATION_PERMISSION",Object(o.A)()),e.setMyUploadsVisible=Object(o.u)(e.CATEGORY+" SET_MY_UPLOADS_VISIBLE",Object(o.A)()),e.setMyUploads=Object(o.u)(e.CATEGORY+" SET_MY_UPLOADS",Object(o.A)()),e})()},uaM9:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));class o{}},ypqk:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));class o{}}}]);