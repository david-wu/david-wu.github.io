(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"5a0h":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("Cfvw");class o{constructor(e,t,n,s){this.firestore=e,this.storage=t,this.imageProcessing=n,this.exifService=s}getImagesForClassifier$(e){return this.firestore.query(t=>t.collection("ppUploads").where("imageClassifierId","==",e).orderBy("updatedAt","desc"))}getFilesForSource$(e){return this.firestore.query(t=>t.collection("ppUploads").where("sourceId","==",e).orderBy("updatedAt","desc"))}getResourceList$(e,t){return this.firestore.query(n=>n.collection(t.path).where("userId","==",e.uid).orderBy("updatedAt","desc"))}getResourceDoc$(e,t){return this.firestore.queryDoc(e=>e.doc(t.path))}patchResourceDoc(e,t,n){return Object(s.a)(this.firestore.db.doc(t.path).update(n))}createResourceDoc(e,t,n){const o=this.firestore.firestoreTimestamp(),c={userId:e.uid,createdAt:o,updatedAt:o};return Object(s.a)(this.firestore.db.collection(t.path).add(c))}getImageSources$(e){return this.firestore.query(t=>t.collection("imageSources").where("userId","==",e.uid).orderBy("updatedAt","desc"))}getImageStreams$(e){return this.firestore.query(t=>t.collection("imageStreams").where("userId","==",e.uid).orderBy("updatedAt","desc"))}}},ISaB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("8Y7J");class o{constructor(){this.str="",this.strChange=new s.m,this.placeholder="Enter Text..",this.isEditing=!1,this.editStr=""}ngOnInit(){this.stringInput.nativeElement.addEventListener("keydown",e=>{e&&13===e.keyCode&&this.onSaveEdit()}),this.stringInput.nativeElement.addEventListener("blur",()=>{this.str===this.editStr&&this.onCancelEdit()})}onEdit(){this.editStr=this.str||"",this.isEditing=!0,setTimeout(()=>this.stringInput.nativeElement.select())}onCancelEdit(){this.isEditing=!1}onSaveEdit(){this.str!==this.editStr&&(this.str=this.editStr,this.strChange.emit(this.editStr)),this.isEditing=!1}onStrChange(e){this.editStr=e}preventBlur(e){e.preventDefault()}}},J0zk:function(e,t,n){"use strict";var s=n("qfsr");n.d(t,"a",(function(){return s.a})),n("dNPo"),n("NSPv");var o=n("qDRf");n.d(t,"b",(function(){return o.a})),n.d(t,"c",(function(){return o.c})),n.d(t,"d",(function(){return o.e})),n("S9X5")},UnLV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{}},Xjb1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("8Y7J");class o{constructor(){this.zoomLevelChange=new s.m,this.minZoomLevel=1,this.maxZoomLevel=6}zoomIn(){this.zoomLevel=Math.max(this.minZoomLevel,this.zoomLevel-1),this.zoomLevelChange.emit(this.zoomLevel)}zoomOut(){this.zoomLevel=Math.min(this.maxZoomLevel,this.zoomLevel+1),this.zoomLevelChange.emit(this.zoomLevel)}}},Yg9u:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{}},c5wv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{}},dW0t:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var s=n("7bNT"),o=n("DQLy"),c=n("LRne"),i=n("eIep"),r=n("JIr8"),l=n("zp1y"),u=n("5+tZ"),a=n("lJxs"),d=n("yLDM"),b=n("rUW/"),p=n("YZbJ");class g{constructor(e,t,n){this.store$=e,this.actions$=t,this.ppService=n,this.addVisibleResourceList$=Object(s.h)(()=>this.actions$.pipe(Object(s.j)(d.a.addVisibleResourceList),Object(l.a)(this.store$.pipe(Object(o.B)(p.d)),this.store$.pipe(Object(o.B)(b.c))),Object(u.a)(([e,t,n])=>{const s=e.resource;return 1===n[s.path]?this.ppService.getResourceList$(t,s).pipe(Object(a.a)(e=>d.a.setResourceList({resource:s,list:e}))):Object(c.a)(d.a.setResourceList({resource:"null",list:[]}))}))),this.addVisibleResourceDoc$=Object(s.h)(()=>this.actions$.pipe(Object(s.j)(d.a.addVisibleResourceDoc),Object(l.a)(this.store$.pipe(Object(o.B)(p.d)),this.store$.pipe(Object(o.B)(b.b))),Object(u.a)(([e,t,n])=>{const s=e.resource;return 1===n[s.path]?this.ppService.getResourceDoc$(t,s).pipe(Object(a.a)(e=>d.a.setResourceDoc({resource:s,doc:e}))):Object(c.a)(d.a.setResourceDoc({resource:"null",doc:void 0}))}))),this.patchResourceDoc$=Object(s.h)(()=>this.actions$.pipe(Object(s.j)(d.a.patchResourceDoc),Object(l.a)(this.store$.pipe(Object(o.B)(p.d))),Object(u.a)(([e,t])=>{const n=e.resource;return this.ppService.patchResourceDoc(t,n,e.patch).pipe(Object(a.a)(e=>d.a.patchResourceSuccess({resource:n})))}))),this.createResourceDoc$=Object(s.h)(()=>this.actions$.pipe(Object(s.j)(d.a.createResourceDoc),Object(l.a)(this.store$.pipe(Object(o.B)(p.d))),Object(i.a)(([e,t])=>{const{resource:n,patch:s}=e;return t?this.ppService.createResourceDoc(t,n,s).pipe(Object(a.a)(e=>d.a.createResourceDocSuccess({resource:n.path})),Object(r.a)(e=>Object(c.a)(d.a.createResourceDocFailure({resource:n.path})))):Object(c.a)(d.a.createResourceDocFailure({resource:n.path}))})))}}},dYoV:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("DQLy"),o=n("yLDM"),c=n("iKuT");const i=Object(s.w)(c.a,Object(s.z)(o.a.addVisibleResourceList,(e,t)=>{const n=e.visibleResourceListCounts[t.resource.path];return Object.assign({},e,{visibleResourceListCounts:Object.assign({},e.visibleResourceListCounts,{[t.resource.path]:n?n+1:1})})}),Object(s.z)(o.a.removeVisibleResourceList,(e,t)=>{const n=e.visibleResourceListCounts[t.resource.path];return Object.assign({},e,{visibleResourceListCounts:Object.assign({},e.visibleResourceListCounts,{[t.resource.path]:n?n-1:0})})}),Object(s.z)(o.a.setResourceList,(e,t)=>Object.assign({},e,{resourceLists:Object.assign({},e.resourceLists,{[t.resource.path]:t.list})})),Object(s.z)(o.a.addVisibleResourceDoc,(e,t)=>{const n=e.visibleResourceDocCounts[t.resource.path];return Object.assign({},e,{visibleResourceDocCounts:Object.assign({},e.visibleResourceDocCounts,{[t.resource.path]:n?n+1:1})})}),Object(s.z)(o.a.removeVisibleResourceDoc,(e,t)=>{const n=e.visibleResourceDocCounts[t.resource.path];return Object.assign({},e,{visibleResourceDocCounts:Object.assign({},e.visibleResourceDocCounts,{[t.resource.path]:n?n-1:0})})}),Object(s.z)(o.a.setResourceDoc,(e,t)=>Object.assign({},e,{resourceDocs:Object.assign({},e.resourceLists,{[t.resource.path]:t.doc})})));function r(e,t){return i(e,t)}},iKuT:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={visibleResourceListCounts:{},resourceLists:{},resourceListsLoading:{},visibleResourceDocCounts:{},resourceDocs:{},resourceDocsLoading:{}}},ma4j:function(e,t,n){"use strict";var s=n("8Y7J"),o=n("s7LF");n("ISaB"),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var c=s.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;margin-left:-.625rem;margin-top:-.25rem}.string-container[_ngcontent-%COMP%]{height:auto;padding:.25rem 0 .25rem .5rem;display:flex;align-items:center;border-radius:.25rem;border:.125rem solid transparent;cursor:pointer}.string-container.editing[_ngcontent-%COMP%], .string-container[_ngcontent-%COMP%]:hover{border-radius:.25rem;border:.125rem solid #8a9a5b}.string-container.editing[_ngcontent-%COMP%]{cursor:default}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]{position:relative;height:100%;flex:0 1 auto}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]   .string-text.space-maker[_ngcontent-%COMP%]{visibility:hidden}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]   .string-text-input[_ngcontent-%COMP%]{border:none;outline:0;font-size:100%;padding:0;overflow:hidden;position:absolute;width:100%;height:100%}.string-container[_ngcontent-%COMP%]   .string-text[_ngcontent-%COMP%]{flex:0 1 auto;text-overflow:ellipsis;overflow:hidden}.string-container[_ngcontent-%COMP%]   .string-text.is-placeholder[_ngcontent-%COMP%]{opacity:.5}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;padding-left:.5rem;padding-right:.25rem}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{height:auto;border:none;padding:.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button.pale[_ngcontent-%COMP%]{opacity:.5}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{font-size:calc(100% - 3px)}.hidden[_ngcontent-%COMP%]{display:none}"]],data:{}});function i(e){return s.Nb(0,[s.Jb(402653184,1,{stringInput:0}),s.Jb(402653184,2,{editEl:0}),(e()(),s.sb(2,0,null,null,16,"div",[["class","string-container editing"]],[[2,"hidden",null]],null,null,null,null)),(e()(),s.sb(3,0,null,null,8,"div",[["class","string-text-input-container"]],null,null,null,null,null)),(e()(),s.sb(4,0,[[1,0],["stringInput",1]],null,5,"input",[["autofocus",""],["class","string-text-input"],["spellcheck","false"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var o=!0,c=e.component;return"input"===t&&(o=!1!==s.Db(e,5)._handleInput(n.target.value)&&o),"blur"===t&&(o=!1!==s.Db(e,5).onTouched()&&o),"compositionstart"===t&&(o=!1!==s.Db(e,5)._compositionStart()&&o),"compositionend"===t&&(o=!1!==s.Db(e,5)._compositionEnd(n.target.value)&&o),"ngModelChange"===t&&(o=!1!==c.onStrChange(n)&&o),o}),null,null)),s.rb(5,16384,null,0,o.d,[s.C,s.k,[2,o.a]],null,null),s.Ib(1024,null,o.i,(function(e){return[e]}),[o.d]),s.rb(7,671744,null,0,o.m,[[8,null],[8,null],[8,null],[6,o.i]],{model:[0,"model"]},{update:"ngModelChange"}),s.Ib(2048,null,o.j,null,[o.m]),s.rb(9,16384,null,0,o.k,[[4,o.j]],null,null),(e()(),s.sb(10,0,null,null,1,"div",[["class","string-text space-maker"]],null,null,null,null,null)),(e()(),s.Lb(11,null,["",""])),(e()(),s.sb(12,0,null,null,6,"div",[["class","control-buttons"]],null,null,null,null,null)),(e()(),s.sb(13,0,null,null,2,"div",[["class","control-button"]],null,[[null,"click"],[null,"mousedown"]],(function(e,t,n){var s=!0,o=e.component;return"click"===t&&(s=!1!==o.onSaveEdit()&&s),"mousedown"===t&&(s=!1!==o.preventBlur(n)&&s),s}),null,null)),(e()(),s.sb(14,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),s.Lb(-1,null,[" save "])),(e()(),s.sb(16,0,null,null,2,"div",[["class","control-button"]],null,[[null,"click"],[null,"mousedown"]],(function(e,t,n){var s=!0,o=e.component;return"click"===t&&(s=!1!==o.onCancelEdit()&&s),"mousedown"===t&&(s=!1!==o.preventBlur(n)&&s),s}),null,null)),(e()(),s.sb(17,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),s.Lb(-1,null,[" cancel "])),(e()(),s.sb(19,0,null,null,6,"div",[["class","string-container"]],[[2,"hidden",null]],[[null,"click"]],(function(e,t,n){var s=!0;return"click"===t&&(s=!1!==e.component.onEdit()&&s),s}),null,null)),(e()(),s.sb(20,0,null,null,1,"div",[["class","string-text"]],[[2,"is-placeholder",null]],null,null,null,null)),(e()(),s.Lb(21,null,["",""])),(e()(),s.sb(22,0,null,null,3,"div",[["class","control-buttons"]],null,null,null,null,null)),(e()(),s.sb(23,0,null,null,2,"div",[["class","control-button pale"]],null,null,null,null,null)),(e()(),s.sb(24,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),s.Lb(-1,null,[" create "]))],(function(e,t){e(t,7,0,t.component.editStr)}),(function(e,t){var n=t.component;e(t,2,0,!n.isEditing),e(t,4,0,n.placeholder,s.Db(t,9).ngClassUntouched,s.Db(t,9).ngClassTouched,s.Db(t,9).ngClassPristine,s.Db(t,9).ngClassDirty,s.Db(t,9).ngClassValid,s.Db(t,9).ngClassInvalid,s.Db(t,9).ngClassPending),e(t,11,0,n.editStr||n.placeholder),e(t,19,0,n.isEditing),e(t,20,0,!n.str),e(t,21,0,n.str||n.placeholder)}))}},ozdi:function(e,t,n){"use strict";var s=n("8Y7J");n("Xjb1"),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var o=s.qb({encapsulation:0,styles:[[".zoom-icons[_ngcontent-%COMP%]{height:28px}.zoom-icons[_ngcontent-%COMP%]   .zoom-icon[_ngcontent-%COMP%]{padding:.125rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.zoom-icons[_ngcontent-%COMP%]   .zoom-icon[_ngcontent-%COMP%]:hover{opacity:.8}.zoom-icons[_ngcontent-%COMP%]   .zoom-icon.disabled[_ngcontent-%COMP%]{cursor:default;opacity:.25}"]],data:{}});function c(e){return s.Nb(2,[(e()(),s.sb(0,0,null,null,4,"div",[["class","zoom-icons"]],null,null,null,null,null)),(e()(),s.sb(1,0,null,null,1,"i",[["class","material-icons zoom-icon"]],[[2,"disabled",null]],[[null,"click"]],(function(e,t,n){var s=!0;return"click"===t&&(s=!1!==e.component.zoomIn()&&s),s}),null,null)),(e()(),s.Lb(-1,null,[" zoom_in "])),(e()(),s.sb(3,0,null,null,1,"i",[["class","material-icons zoom-icon"]],[[2,"disabled",null]],[[null,"click"]],(function(e,t,n){var s=!0;return"click"===t&&(s=!1!==e.component.zoomOut()&&s),s}),null,null)),(e()(),s.Lb(-1,null,[" zoom_out "]))],null,(function(e,t){var n=t.component;e(t,1,0,n.zoomLevel<=n.minZoomLevel),e(t,3,0,n.zoomLevel>=n.maxZoomLevel)}))}},"rUW/":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var s=n("DQLy");const o=Object(s.v)("picturePiper"),c=Object(s.y)(o,e=>e.visibleResourceListCounts),i=Object(s.y)(o,e=>e.resourceLists),r=(Object(s.y)(o,e=>e.resourceListsLoading),Object(s.y)(o,e=>e.visibleResourceDocCounts));Object(s.y)(o,e=>e.resourceDocs),Object(s.y)(o,e=>e.resourceDocsLoading)},yLDM:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("DQLy");let o=(()=>{class e{}return e.CATEGORY="[PICTURE_PIPER]",e.addVisibleResourceList=Object(s.u)(e.CATEGORY+" ADD_VISIBLE_RESOURCE_LIST",Object(s.A)()),e.removeVisibleResourceList=Object(s.u)(e.CATEGORY+" REMOVE_VISIBLE_RESOURCE_LIST",Object(s.A)()),e.setResourceList=Object(s.u)(e.CATEGORY+" SET_RESOURCE_LIST",Object(s.A)()),e.addVisibleResourceDoc=Object(s.u)(e.CATEGORY+" ADD_VISIBLE_RESOURCE_DOC",Object(s.A)()),e.removeVisibleResourceDoc=Object(s.u)(e.CATEGORY+" REMOVE_VISIBLE_RESOURCE_DOC",Object(s.A)()),e.setResourceDoc=Object(s.u)(e.CATEGORY+" SET_RESOURCE_DOC",Object(s.A)()),e.createResourceDoc=Object(s.u)(e.CATEGORY+" CREATE_RESOURCE_DOC",Object(s.A)()),e.createResourceDocSuccess=Object(s.u)(e.CATEGORY+" CREATE_RESOURCE_DOC_SUCCESS",Object(s.A)()),e.createResourceDocFailure=Object(s.u)(e.CATEGORY+" CREATE_RESOURCE_DOC_FAILURE",Object(s.A)()),e.patchResourceDoc=Object(s.u)(e.CATEGORY+" PATCH_RESOURCE_DOC",Object(s.A)()),e.patchResourceSuccess=Object(s.u)(e.CATEGORY+" PATCH_RESOURCE_SUCCESS",Object(s.A)()),e})()}}]);