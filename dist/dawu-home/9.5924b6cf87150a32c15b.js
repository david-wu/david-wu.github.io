(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"A/lh":function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var o=t("611t"),r=function(){function n(){}return n.prototype.getUserLocation=function(){return new Promise((function(n,e){navigator.geolocation.getCurrentPosition((function(e){var t=o.a.fromLatLong(e.coords.latitude,e.coords.longitude,{locationSource:"USER"});n(t)}),(function(n){return e(n)}),{enableHighAccuracy:!1,maximumAge:0})}))},n.prototype.getIsPermissionGranted=function(){return new Promise((function(n,e){if(navigator.permissions)return navigator.permissions.query({name:"geolocation"}).then((function(e){n("granted"===e.state)}));e(new Error("Permission API is not supported"))}))},n}()},DSOO:function(n,e,t){"use strict";t.r(e);var o=t("CcnG"),r=function(){return function(){}}(),i=function(){return function(){}}(),a=t("pMnS"),c=t("ZYCi"),s=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;width:100%}@media screen and (max-width:750px){[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{position:relative;flex:1 1 0;overflow:hidden;max-width:27.5%;min-width:20rem}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;overflow:auto;position:relative}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;margin:0;justify-content:center;background-color:#3f4038;padding-top:.25rem;height:2.25rem}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;width:8rem;padding:.5rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;flex:0 1 auto;margin:0 .25rem;border-radius:4px 4px 0 0}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.page-container[_ngcontent-%COMP%]   .nav-items-container[_ngcontent-%COMP%]   .nav-item[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.page-container[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{flex:1 1 0}.page-content[_ngcontent-%COMP%]{background-color:#efebdf}"]],data:{}});function u(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,21,"div",[["class","page-container"]],null,null,null,null,null)),(n()(),o.sb(1,0,null,null,16,"div",[["class","nav-items-container"]],null,null,null,null,null)),(n()(),o.sb(2,0,null,null,7,"div",[["class","nav-item"]],null,[[null,"click"]],(function(n,e,t){var r=!0;return"click"===e&&(r=!1!==o.Db(n,3).onClick()&&r),r}),null,null)),o.rb(3,16384,[[1,4]],0,c.m,[c.l,c.a,[8,null],o.D,o.k],{routerLink:[0,"routerLink"]},null),o.Eb(4,1),o.rb(5,1720320,null,2,c.n,[c.l,o.k,o.D,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),o.Jb(603979776,1,{links:1}),o.Jb(603979776,2,{linksWithHrefs:1}),o.Eb(8,1),(n()(),o.Lb(-1,null,["Near Me"])),(n()(),o.sb(10,0,null,null,7,"div",[["class","nav-item"]],null,[[null,"click"]],(function(n,e,t){var r=!0;return"click"===e&&(r=!1!==o.Db(n,11).onClick()&&r),r}),null,null)),o.rb(11,16384,[[3,4]],0,c.m,[c.l,c.a,[8,null],o.D,o.k],{routerLink:[0,"routerLink"]},null),o.Eb(12,1),o.rb(13,1720320,null,2,c.n,[c.l,o.k,o.D,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),o.Jb(603979776,3,{links:1}),o.Jb(603979776,4,{linksWithHrefs:1}),o.Eb(16,1),(n()(),o.Lb(-1,null,["My Uploads"])),(n()(),o.sb(18,0,null,null,3,"div",[["class","page-content"]],null,null,null,null,null)),(n()(),o.sb(19,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),o.rb(20,212992,null,0,c.q,[c.b,o.O,o.j,[8,null],o.h],null,null),(n()(),o.sb(21,0,null,null,0,"div",[["class","footer"]],null,null,null,null,null))],(function(n,e){var t=n(e,4,0,"./near-me");n(e,3,0,t);var o=n(e,8,0,"active");n(e,5,0,o);var r=n(e,12,0,"./my-uploads");n(e,11,0,r);var i=n(e,16,0,"active");n(e,13,0,i),n(e,20,0)}),null)}function l(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,1,"dwu-photo-gallery",[],null,null,null,u,s)),o.rb(1,49152,null,0,r,[],null,null)],null,null)}var d=o.ob("dwu-photo-gallery",r,l,{},{},[]),g=t("Ip0R"),f=t("A/lh"),b=t("dNPo"),p=t("yGQT"),O=t("7bNT"),_=t("xpxz"),P=t("bqb4"),h=t("GrFz"),M=t("cxyc"),C=t("YDhq"),m=t("uaM9"),v=t("ypqk"),y=function(){return Promise.all([t.e(0),t.e(6),t.e(1),t.e(26)]).then(t.bind(null,"UTLn")).then((function(n){return n.NearMeModuleNgFactory}))},j=function(){return Promise.all([t.e(0),t.e(6),t.e(1),t.e(22)]).then(t.bind(null,"e/a4")).then((function(n){return n.MyUploadsModuleNgFactory}))},x=function(){return function(){}}(),L=t("NSPv");t.d(e,"PhotoGalleryModuleNgFactory",(function(){return U}));var U=o.pb(i,[],(function(n){return o.Ab([o.Bb(512,o.j,o.ab,[[8,[a.a,d]],[3,o.j],o.w]),o.Bb(4608,g.o,g.n,[o.t,[2,g.A]]),o.Bb(4608,f.a,f.a,[]),o.Bb(4608,b.a,b.a,[p.n,O.a,f.a,_.a]),o.Bb(4608,P.a,P.a,[_.a,h.a,f.a,M.a,C.a]),o.Bb(1073742336,g.c,g.c,[]),o.Bb(1073742336,m.a,m.a,[]),o.Bb(1073742336,v.a,v.a,[]),o.Bb(1073742336,c.p,c.p,[[2,c.u],[2,c.l]]),o.Bb(1073742336,x,x,[]),o.Bb(1024,p.O,(function(){return[{}]}),[]),o.Bb(1024,p.j,(function(){return[{key:"photoGallery",reducerFactory:p.s,metaReducers:[],initialState:void 0}]}),[]),o.Bb(1024,p.P,p.W,[o.q,p.O,p.j]),o.Bb(1024,p.N,(function(){return[L.a]}),[]),o.Bb(1024,p.Q,(function(n){return[n]}),[p.N]),o.Bb(1024,p.b,(function(n,e,t){return[p.X(n,e,t)]}),[o.q,p.N,p.Q]),o.Bb(1024,p.U,(function(n){return[p.H(n)]}),[p.T]),o.Bb(1073873408,p.o,p.o,[p.P,p.b,p.g,p.p,[2,p.U]]),o.Bb(1024,O.p,(function(){return[[b.a]]}),[]),o.Bb(1024,O.g,(function(){return[[]]}),[]),o.Bb(1024,O.q,(function(n,e,t){return[O.k(n,e,t)]}),[o.q,O.p,O.g]),o.Bb(1073742336,O.d,O.d,[O.e,O.q,[2,p.p],[2,p.o]]),o.Bb(1073742336,i,i,[]),o.Bb(1024,c.j,(function(){return[[{path:"",component:r,children:[{path:"near-me",loadChildren:y},{path:"my-uploads",loadChildren:j},{path:"",redirectTo:"near-me",pathMatch:"full"}]}]]}),[])])}))},NSPv:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var o=t("mrSG"),r=t("yGQT"),i=t("qfsr"),a=t("S9X5"),c=Object(r.w)(a.a,Object(r.z)(i.a.setUserLocation,(function(n,e){return o.__assign({},n,{userLocation:e.payload})})),Object(r.z)(i.a.setNearbyImagesVisible,(function(n,e){return o.__assign({},n,{nearbyImagesVisible:e.payload})})),Object(r.z)(i.a.setNearbyImages,(function(n,e){return o.__assign({},n,{nearbyImages:e.payload})})),Object(r.z)(i.a.setUserLocationPermission,(function(n,e){return o.__assign({},n,{locationPermission:e.locationPermission})})),Object(r.z)(i.a.setMyUploadsVisible,(function(n,e){return o.__assign({},n,{myUploadsVisible:e.payload})})),Object(r.z)(i.a.setMyUploads,(function(n,e){return o.__assign({},n,{myUploads:e.payload})})));function s(n,e){return c(n,e)}},S9X5:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var o={nearbyImagesVisible:!1,nearbyImages:void 0,userLocation:void 0,locationPermission:void 0,myUploadsVisible:void 0,myUploads:void 0}},YZbJ:function(n,e,t){"use strict";var o=t("Z0Sn"),r=(t("7sJY"),t("BaDc"),t("yGQT")),i=Object(r.v)("auth"),a=Object(r.y)(i,(function(n){return n.user})),c=Object(r.y)(a,(function(n){return void 0===n})),s=Object(r.y)(a,(function(n){return null===n}));t("Bhw0"),t.d(e,"a",(function(){return o.a})),t.d(e,"d",(function(){return a})),t.d(e,"b",(function(){return c})),t.d(e,"c",(function(){return s}))},bqb4:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var o=t("mrSG"),r=function(){function n(n,e,t,o,r){this.firestore=n,this.storage=e,this.userLocationService=t,this.imageProcessing=o,this.exifService=r}return n.prototype.deleteFile=function(n,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.storage.deleteFile(n)];case 1:return e.sent(),[4,this.firestore.unregisterFile(n)];case 2:return e.sent(),[2]}}))}))},n.prototype.uploadFile=function(n,e){return o.__awaiter(this,void 0,void 0,(function(){var t,r,i,a,c,s,u,l;return o.__generator(this,(function(d){switch(d.label){case 0:return[4,this.exifService.getExifData(n)];case 1:return t=d.sent(),r=this.exifService.getLocationData(t),(i=r)?[3,3]:[4,this.userLocationService.getUserLocation()];case 2:i=d.sent(),d.label=3;case 3:return a={userId:e.uid,fileName:n.name,isUploaded:!1,locationData:o.__assign({},i)},[4,this.firestore.insertUploadDoc(a)];case 4:return c=d.sent(),s=o.__assign({},a,{id:c.id}),[4,this.imageProcessing.processImageFile(n,t)];case 5:return u=d.sent(),[4,this.storage.uploadFile(u,s.id)];case 6:return[4,d.sent().ref.getDownloadURL()];case 7:return l=d.sent(),[4,this.firestore.registerFileUploaded(s.id,{downloadUrl:l})];case 8:return d.sent(),[2]}}))}))},n}()},dNPo:function(n,e,t){"use strict";t.d(e,"a",(function(){return p}));var o=t("mrSG"),r=t("7bNT"),i=t("yGQT"),a=t("LvDl"),c=t("0/uQ"),s=t("F/XL"),u=t("15JJ"),l=t("67Y/"),d=t("/PH2"),g=t("qfsr"),f=t("qDRf"),b=t("YZbJ"),p=function(){return function(n,e,t,p){var O=this;this.store$=n,this.actions$=e,this.userLocationService=t,this.firestore=p,this.requestUserLocation$=Object(r.h)((function(){return O.actions$.pipe(Object(r.j)(g.a.requestUserLocation),Object(u.a)((function(){return Object(c.a)(O.userLocationService.getUserLocation()).pipe(Object(l.a)((function(n){return g.a.setUserLocation({payload:n})})))})))})),this.loadNearbyLocation$=Object(r.h)((function(){return O.actions$.pipe(Object(r.j)(g.a.setUserLocation,g.a.setNearbyImagesVisible),Object(d.a)(O.store$.pipe(Object(i.B)(f.e)),O.store$.pipe(Object(i.B)(f.d))),Object(u.a)((function(n){var e=o.__read(n,3),t=e[1];return e[2]&&t?O.firestore.getNearbyUploads$(t).pipe(Object(l.a)((function(n){var e=Object(a.sortBy)(n,(function(n){return Math.pow(t.latitude-n.locationData.latitude,2)+Math.pow(t.longitude-n.locationData.longitude,2)}));return g.a.setNearbyImages({payload:e})}))):Object(s.a)(g.a.setNearbyImages({payload:void 0}))})))})),this.getMyUploads$=Object(r.h)((function(){return O.actions$.pipe(Object(r.j)(b.a.setUser,g.a.setMyUploadsVisible),Object(d.a)(O.store$.pipe(Object(i.B)(b.d)),O.store$.pipe(Object(i.B)(f.b))),Object(u.a)((function(n){var e=o.__read(n,3),t=e[1];return e[2]&&t?O.firestore.getUploadedFiles$(t).pipe(Object(l.a)((function(n){return g.a.setMyUploads({payload:n})}))):Object(s.a)(g.a.setMyUploads({payload:[]}))})))})),this.checkUserLocationPermission$=Object(r.h)((function(){return O.actions$.pipe(Object(r.j)(g.a.checkUserLocationPermission),Object(u.a)((function(){return Object(c.a)(O.userLocationService.getIsPermissionGranted()).pipe(Object(l.a)((function(n){return g.a.setUserLocationPermission({locationPermission:n})})))})))}))}}()},qDRf:function(n,e,t){"use strict";t.d(e,"e",(function(){return i})),t.d(e,"d",(function(){return a})),t.d(e,"c",(function(){return c})),t.d(e,"b",(function(){return s})),t.d(e,"a",(function(){return u}));var o=t("yGQT"),r=Object(o.v)("photoGallery"),i=Object(o.y)(r,(function(n){return n.userLocation})),a=Object(o.y)(r,(function(n){return n.nearbyImagesVisible})),c=Object(o.y)(r,(function(n){return n.nearbyImages})),s=(Object(o.y)(r,(function(n){return n.locationPermission})),Object(o.y)(r,(function(n){return n.myUploadsVisible}))),u=Object(o.y)(r,(function(n){return n.myUploads}))},qfsr:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var o=t("yGQT"),r=function(){function n(){}return n.CATEGORY="[PHOTO_GALLERY]",n.requestUserLocation=Object(o.u)(n.CATEGORY+" REQUEST_USER_LOCATION"),n.setUserLocation=Object(o.u)(n.CATEGORY+" SET_USER_LOCATION",Object(o.A)()),n.setNearbyImagesVisible=Object(o.u)(n.CATEGORY+" SET_NEARBY_IMAGES_VISIBLE",Object(o.A)()),n.setNearbyImages=Object(o.u)(n.CATEGORY+" SET_NEARBY_IMAGES",Object(o.A)()),n.checkUserLocationPermission=Object(o.u)(n.CATEGORY+" CHECK_USER_LOCATION_PERMISSION"),n.setUserLocationPermission=Object(o.u)(n.CATEGORY+" SET_USER_LOCATION_PERMISSION",Object(o.A)()),n.setMyUploadsVisible=Object(o.u)(n.CATEGORY+" SET_MY_UPLOADS_VISIBLE",Object(o.A)()),n.setMyUploads=Object(o.u)(n.CATEGORY+" SET_MY_UPLOADS",Object(o.A)()),n}()},uaM9:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var o=function(){return function(){}}()},ypqk:function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var o=function(){return function(){}}()}}]);