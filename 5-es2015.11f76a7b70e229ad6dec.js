(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Kj3r:function(l,n,t){"use strict";t.d(n,"a",(function(){return o}));var e=t("7o/Q"),i=t("D0XW");function o(l,n=i.a){return t=>t.lift(new s(l,n))}class s{constructor(l,n){this.dueTime=l,this.scheduler=n}call(l,n){return n.subscribe(new u(l,this.dueTime,this.scheduler))}}class u extends e.a{constructor(l,n,t){super(l),this.dueTime=n,this.scheduler=t,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(l){this.clearDebounce(),this.lastValue=l,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:l}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(l)}}clearDebounce(){const l=this.debouncedSubscription;null!==l&&(this.remove(l),l.unsubscribe(),this.debouncedSubscription=null)}}function a(l){l.debouncedNext()}},Oo1w:function(l,n,t){"use strict";t.d(n,"a",(function(){return e}));class e{}},SxHE:function(l,n,t){"use strict";t.d(n,"a",(function(){return e}));class e{}},Tyz4:function(l,n,t){"use strict";t.d(n,"a",(function(){return e}));class e{}},ZGeo:function(l,n,t){"use strict";var e=t("8Y7J"),i=t("iWpE"),o=t("Zu2T"),s=t("SVse");class u{constructor(l){this.hostEl=l,this.tabindex=0,this.select=new e.m,this.delete=new e.m,this.download=new e.m,this.zoomIn=new e.m,this.isFocused=!1,this.hideOverlay=!1}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1,this.hideOverlay=!1}onMouseleave(){this.isFocused=!1,this.hideOverlay=!1}onMousedown(){this.isFocused&&(this.hideOverlay=!this.hideOverlay)}onSelect(l){l.stopPropagation(),this.select.emit()}onDelete(l){l.stopPropagation(),this.delete.emit()}onDownload(l){l.stopPropagation(),this.download.emit()}onZoomIn(l){l.stopPropagation(),this.zoomIn.emit()}}var a=e.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%;height:100%;cursor:pointer;position:relative;outline:0}[_nghost-%COMP%]   .grid-image[_ngcontent-%COMP%]{width:100%;height:100%}@media (hover:hover){[_nghost-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{display:block}}.overlay[_ngcontent-%COMP%]{display:none;position:absolute;width:100%;height:100%;top:0;left:0}.overlay.is-visible[_ngcontent-%COMP%]{display:block}.overlay[_ngcontent-%COMP%]   .corner[_ngcontent-%COMP%]{position:absolute;width:48px;height:48px}.overlay[_ngcontent-%COMP%]   .corner.upper-left[_ngcontent-%COMP%]{background:linear-gradient(315deg,rgba(255,255,255,0) 50%,rgba(112,130,56,.6) 55%,rgba(63,64,56,.6) 60%);top:0;left:0}.overlay[_ngcontent-%COMP%]   .corner.upper-right[_ngcontent-%COMP%]{background:linear-gradient(45deg,rgba(255,255,255,0) 50%,rgba(112,130,56,.6) 55%,rgba(63,64,56,.6) 60%);top:0;right:0}.overlay[_ngcontent-%COMP%]   .corner.bottom-right[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,255,255,0) 50%,rgba(112,130,56,.6) 55%,rgba(63,64,56,.6) 60%);bottom:0;right:0}.overlay[_ngcontent-%COMP%]   .corner.bottom-left[_ngcontent-%COMP%]{background:linear-gradient(225deg,rgba(255,255,255,0) 50%,rgba(112,130,56,.6) 55%,rgba(63,64,56,.6) 60%);bottom:0;left:0}.overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;color:#fff;opacity:.6;width:26px;height:26px;padding:3px}.overlay[_ngcontent-%COMP%]   .icon.upper-left[_ngcontent-%COMP%]{top:0;left:0}.overlay[_ngcontent-%COMP%]   .icon.upper-right[_ngcontent-%COMP%]{top:0;right:0}.overlay[_ngcontent-%COMP%]   .icon.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.overlay[_ngcontent-%COMP%]   .icon.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{opacity:1}.overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;line-height:20px}"]],data:{}});function c(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,0,"img",[["class","grid-image"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,n.component.src)}))}function r(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","loader-container centered"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"div",[["class","dwu-loader"]],null,null,null,null,null))],null,null)}function d(l){return e.Nb(2,[(l()(),e.hb(16777216,null,null,1,null,c)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.sb(2,0,null,null,16,"div",[["class","overlay"]],[[2,"is-visible",null]],null,null,null,null)),(l()(),e.sb(3,0,null,null,0,"div",[["class","corner upper-left"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,0,"div",[["class","corner upper-right"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,0,"div",[["class","corner bottom-right"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,0,"div",[["class","corner bottom-left"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,2,"div",[["class","icon upper-left"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onSelect(t)&&e),e}),null,null)),(l()(),e.sb(8,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["check_box_outline_blank"])),(l()(),e.sb(10,0,null,null,2,"div",[["class","icon upper-right"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onDelete(t)&&e),e}),null,null)),(l()(),e.sb(11,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["delete"])),(l()(),e.sb(13,0,null,null,2,"div",[["class","icon bottom-left"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onDownload(t)&&e),e}),null,null)),(l()(),e.sb(14,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["cloud_download"])),(l()(),e.sb(16,0,null,null,2,"div",[["class","icon bottom-right"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onZoomIn(t)&&e),e}),null,null)),(l()(),e.sb(17,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["zoom_in"])),(l()(),e.hb(0,[["loader",2]],null,0,null,r))],(function(l,n){l(n,1,0,n.component.src,e.Db(n,19))}),(function(l,n){var t=n.component;l(n,2,0,t.isFocused&&!t.hideOverlay)}))}t("bMre"),t.d(n,"a",(function(){return h})),t.d(n,"b",(function(){return f}));var h=e.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .near-by-uploads[_ngcontent-%COMP%]{flex:1 1 0;display:flex;flex-wrap:wrap}.tile[_ngcontent-%COMP%]{padding:1px;position:relative}.magnified-image-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;padding:1rem;max-width:100%;max-height:100%;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.85)}.magnified-image-container[_ngcontent-%COMP%]   img.magnified-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]],data:{}});function g(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"dwu-virtual-scroll-grid",[["class","near-by-uploads"]],null,[[null,"alwaysUseMaxColumnsChange"],[null,"centeredTileIdChange"]],(function(l,n,t){var e=!0,i=l.component;return"alwaysUseMaxColumnsChange"===n&&(e=!1!==(i.alwaysUseMaxColumns=t)&&e),"centeredTileIdChange"===n&&(e=!1!==(i.centeredTileId=t)&&e),e}),i.b,i.a)),e.rb(1,770048,null,0,o.a,[e.k],{tileIds:[0,"tileIds"],maxColumns:[1,"maxColumns"],alwaysUseMaxColumns:[2,"alwaysUseMaxColumns"],centeredTileId:[3,"centeredTileId"],tileTemplate:[4,"tileTemplate"],tileOptions:[5,"tileOptions"]},{centeredTileIdChange:"centeredTileIdChange"})],(function(l,n){var t=n.component;l(n,1,0,t.fileIds,t.zoomLevel,t.alwaysUseMaxColumns,t.centeredTileId,e.Db(n.parent,2),t.tileOptions)}),null)}function m(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,"div",[["class","tile"]],[[4,"width",null],[4,"height",null]],null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"dwu-decorated-image",[["class","grid-image"]],[[8,"tabIndex",0]],[[null,"zoomIn"],[null,"download"],[null,"delete"],[null,"focus"],[null,"blur"],[null,"mouseleave"],[null,"mousedown"]],(function(l,n,t){var i=!0,o=l.component;return"focus"===n&&(i=!1!==e.Db(l,2).onFocus()&&i),"blur"===n&&(i=!1!==e.Db(l,2).onBlur()&&i),"mouseleave"===n&&(i=!1!==e.Db(l,2).onMouseleave()&&i),"mousedown"===n&&(i=!1!==e.Db(l,2).onMousedown()&&i),"zoomIn"===n&&(i=!1!==o.onZoomIn(l.context.tileId)&&i),"download"===n&&(i=!1!==o.downloadImage(l.context.tileId)&&i),"delete"===n&&(i=!1!==o.onDeleteImage(l.context.tileId)&&i),i}),d,a)),e.rb(2,49152,null,0,u,[e.k],{src:[0,"src"]},{delete:"delete",download:"download",zoomIn:"zoomIn"})],(function(l,n){l(n,2,0,n.component.getImgSrc(n.context.tileId,n.context.targetTileOption.maxWidth))}),(function(l,n){l(n,0,0,n.context.scaledImageWidthStr,n.context.scaledImageHeightStr),l(n,1,0,e.Db(n,2).tabindex)}))}function p(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","loader-container for-page"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"div",[["class","dwu-loader"]],null,null,null,null,null))],null,null)}function b(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","magnified-image-container"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==(l.component.magnifiedImageId=void 0)&&e),e}),null,null)),(l()(),e.sb(1,0,null,null,0,"img",[["class","magnified-image"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var t=n.component;l(n,1,0,t.getImgSrc(t.magnifiedImageId,1080))}))}function f(l){return e.Nb(0,[(l()(),e.hb(16777216,null,null,1,null,g)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,[["tileTemplate",2]],null,0,null,m)),(l()(),e.hb(0,[["loaderForPage",2]],null,0,null,p)),(l()(),e.hb(16777216,null,null,1,null,b)),e.rb(5,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,1,0,t.fileIds,e.Db(n,3)),l(n,5,0,t.magnifiedImageId)}),null)}},Zu2T:function(l,n,t){"use strict";t.d(n,"a",(function(){return d}));var e=t("hOhj"),i=t("8Y7J"),o=t("KtZj"),s=t.n(o),u=t("LvDl"),a=t("2Vo4"),c=t("VRyK"),r=t("Kj3r");class d{constructor(l){this.hostEl=l,this.tileIds=[],this.maxColumns=5,this.alwaysUseMaxColumns=!1,this.marginLeft=0,this.centeredTileIdChange=new i.m,this.columnCount=void 0,this.imageWidth=void 0,this.scaledImageWidth=void 0,this.scaledImageWidthStr=void 0,this.scaledImageHeight=void 0,this.scaledImageHeightStr=void 0,this.strat=new e.e(1,1,1),this.layoutChange$=new a.a(void 0)}ngOnChanges(l){(l.tileIds||l.tileOptions||l.maxColumns||l.alwaysUseMaxColumns)&&(this.sizeTiles(),this.layoutChange$.next(null),this.scrollToCenteredTileId()),l.centeredTileId&&l.centeredTileId.previousValue!==l.centeredTileId.currentValue&&this.scrollToCenteredTileId()}ngOnInit(){this.sizeTiles(),this.layoutChange$.next(null),this.scrollToCenteredTileId(),this.sensor=new s.a(this.hostEl.nativeElement,()=>{this.sizeTiles(),this.layoutChange$.next(null),this.scrollToCenteredTileId()}),this.strat.attach(this.scrollViewport),this.sub=Object(c.a)(this.scrollViewport.elementScrolled(),this.layoutChange$).pipe(Object(r.a)(200)).subscribe(()=>this.updateCenteredTileId())}ngOnDestroy(){this.sensor&&this.sensor.detach(),this.sub&&this.sub.unsubscribe()}sizeTiles(){const l=this.hostEl.nativeElement.clientWidth-this.marginLeft,n=this.hostEl.nativeElement.clientHeight;this.targetTileOption=this.pickTileOption(l),this.columnCount=this.alwaysUseMaxColumns?this.maxColumns:Math.min(Math.ceil(l/this.targetTileOption.maxWidth),this.maxColumns),this.scaledImageWidth=l/this.columnCount,this.scaledImageHeight=this.scaledImageWidth/this.targetTileOption.aspectRatio;const t=Math.max(this.scaledImageHeight/n,1);this.scaledImageWidth/=t,this.scaledImageHeight/=t,this.scaledImageWidthStr=this.scaledImageWidth+"px",this.scaledImageHeightStr=this.scaledImageHeight+"px",this.setTileIdRows(this.columnCount,this.tileIds),this.strat.updateItemAndBufferSize(this.scaledImageHeight,2*this.scaledImageHeight,3*this.scaledImageHeight),this.strat.attach(this.scrollViewport)}pickTileOption(l){return this.tileOptions.find(n=>n.maxWidth*(n.maxColumns||this.maxColumns)>=l)||Object(u.last)(this.tileOptions)}setTileIdRows(l=this.columnCount,n=this.tileIds){this.tileIdRows=this.getTileIdRows(n,l),this.tileIds=n}getTileIdRows(l,n){if(!l||!l.length||!n)return[];const t=[];let e=[l[0]];for(let i=1;i<l.length;i++)i%n==0&&(t.push(e),e=[]),e.push(l[i]);return e.length&&t.push(e),t}updateCenteredTileId(){const l=this.scrollViewport.measureScrollOffset("top"),n=this.getMostCenteredRowIndex(l),t=this.tileIdRows[n];if(!t||t.includes(this.centeredTileId))return;const e=t[Math.floor(t.length/2)];this.centeredTileId=e,this.centeredTileIdChange.emit(e)}scrollToCenteredTileId(l=this.centeredTileId){this.tileIds&&this.scrollViewport&&l&&(clearTimeout(this.scrollToTimeout),this.scrollToTimeout=setTimeout(()=>{const n=this.getMostCenteredRowIndex(),t=this.tileIdRows[n];if(!t||t.includes(l))return;const e=this.hostEl.nativeElement.clientHeight,i=this.tileIds.indexOf(l),o=Math.ceil((i+1)/this.columnCount)-1;this.scrollViewport.scrollTo({top:o*this.scaledImageHeight-e/2+this.scaledImageHeight/2})}))}getMostCenteredRowIndex(l){return l=l||this.scrollViewport.measureScrollOffset("top"),Math.round((l+this.hostEl.nativeElement.clientHeight/2)/this.scaledImageHeight-.5)}}},bMre:function(l,n,t){"use strict";t.d(n,"a",(function(){return o}));var e=t("8Y7J"),i=t("LvDl");class o{constructor(){this.zoomLevel=3,this.deleteImage=new e.m,this.alwaysUseMaxColumns=!0,this.tileOptions=[{maxWidth:150,aspectRatio:4/3},{maxWidth:320,aspectRatio:4/3},{maxWidth:640,aspectRatio:4/3},{maxWidth:1080,aspectRatio:4/3}]}ngOnChanges(l){l.files&&this.files&&(this.fileIds=Object(i.map)(this.files,l=>l.id),this.filesById=Object(i.keyBy)(this.files,l=>l.id),this.centeredTileId=void 0)}getImgSrc(l,n){return n=Math.min(640,n),Object(i.get)(this.filesById,[l,"uploadMeta","downloadUrl_"+n])}onZoomIn(l){this.magnifiedImageId=l}onDeleteImage(l){this.deleteImage.emit(l)}downloadImage(l){const n=this.filesById[l].uploadMeta.downloadUrl,t=window.URL||window.webkitURL,e=new XMLHttpRequest,i=document.createElement("a");e.open("GET",n,!0),e.responseType="blob",e.onload=()=>{const n=new Blob([e.response],{type:"application/octet-stream"});i.href=t.createObjectURL(n),i.download=l+".jpg",i.style="display: none",document.body.appendChild(i),i.click(),i.remove()},e.send()}}},iWpE:function(l,n,t){"use strict";var e=t("8Y7J"),i=t("SVse"),o=t("Wucu"),s=t("hOhj"),u=t("IP0z");t("Zu2T"),t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return h}));var a=e.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;height:100%;width:100%;flex-direction:column}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{display:block;flex:1 1 0;overflow-x:hidden;padding-top:20px}[_nghost-%COMP%]   .upload-file-container-row[_ngcontent-%COMP%]{display:flex}"]],data:{}});function c(l){return e.Nb(0,[(l()(),e.hb(0,null,null,0))],null,null)}function r(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,3,"div",[["class","upload-file-container"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,2,null,c)),e.rb(2,540672,null,0,i.r,[e.O],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),e.Gb(3,{scaledImageWidthStr:0,scaledImageHeightStr:1,tileId:2,targetTileOption:3})],(function(l,n){var t=n.component,e=l(n,3,0,t.scaledImageWidthStr,t.scaledImageHeightStr,n.context.$implicit,t.targetTileOption);l(n,2,0,e,t.tileTemplate)}),null)}function d(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,"div",[["class","upload-file-container-row"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,r)),e.rb(2,278528,null,0,i.l,[e.O,e.L,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,2,0,n.context.$implicit)}),null)}function h(l){return e.Nb(0,[e.Jb(402653184,1,{scrollViewport:0}),(l()(),e.sb(1,0,null,null,6,"cdk-virtual-scroll-viewport",[["class","viewport cdk-virtual-scroll-viewport"]],[[2,"cdk-virtual-scroll-orientation-horizontal",null],[2,"cdk-virtual-scroll-orientation-vertical",null]],null,null,o.b,o.a)),e.Ib(6144,null,s.b,null,[s.d]),e.rb(3,540672,null,0,s.a,[],{itemSize:[0,"itemSize"]},null),e.Ib(1024,null,s.i,s.j,[s.a]),e.rb(5,245760,[[1,4],["scrollViewport",4]],0,s.d,[e.k,e.h,e.x,[2,s.i],[2,u.b],s.g],null,null),(l()(),e.hb(16777216,null,0,1,null,d)),e.rb(7,409600,null,0,s.c,[e.O,e.L,e.q,[1,s.d],e.x],{cdkVirtualForOf:[0,"cdkVirtualForOf"]},null)],(function(l,n){var t=n.component;l(n,3,0,t.scaledImageHeight),l(n,5,0),l(n,7,0,t.tileIdRows)}),(function(l,n){l(n,1,0,"horizontal"===e.Db(n,5).orientation,"horizontal"!==e.Db(n,5).orientation)}))}}}]);