function _slicedToArray(n,e){return _arrayWithHoles(n)||_iterableToArrayLimit(n,e)||_unsupportedIterableToArray(n,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(n,e){if(n){if("string"==typeof n)return _arrayLikeToArray(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(n,e):void 0}}function _arrayLikeToArray(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}function _iterableToArrayLimit(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,l,r,i,c=[],u=!0,a=!1;try{if(r=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(o=r.call(t)).done)&&(c.push(o.value),c.length!==e);u=!0);}catch(n){a=!0,l=n}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(a)throw l}}return c}}function _arrayWithHoles(n){if(Array.isArray(n))return n}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,_toPropertyKey(o.key),o)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function _toPropertyKey(n){var e=_toPrimitive(n,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(n,e){if("object"!=typeof n||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{biHz:function(n,e,t){"use strict";t.r(e);var o=t("8Y7J"),l=_createClass((function n(){_classCallCheck(this,n)})),r=t("Vxrp"),i=t("pMnS"),c=t("j53P"),u=t("SAP+"),a=t("SVse"),s=t("6+7j"),g=t("sjqh"),b=t("nPNc"),d=t("6TI7"),p=t("+J3Q"),f=t("5tJd"),h=t("DQLy"),C=t("ssbT"),_=t("LvDl"),O=t("2Vo4"),m=t("itXk"),P=t("lJxs"),M=function(){function n(e){_classCallCheck(this,n),this.store=e,this.selectToken=new o.m,this.fileGroup=f.a.createWithRoot("ROOT"),this.selectedFileIds=new Set,this.rootFileId="ROOT",this.imageSourceId$=new O.a(void 0),this.imageTokens$=Object(m.a)(this.store.pipe(Object(h.B)(C.b)),this.imageSourceId$).pipe(Object(P.a)((function(n){var e=_slicedToArray(n,2);return e[0][e[1]]||[]})))}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.subs=[this.imageTokens$.subscribe((function(e){n.imageTokensById=Object(_.keyBy)(e,"id");var t=(e||[]).map((function(e){return{id:e.id,label:n.getTokenLabel(e)}}));n.fileGroup.setRootChildren(t)}))]}},{key:"ngOnDestroy",value:function(){(this.subs||[]).forEach((function(n){return n.unsubscribe()}))}},{key:"ngOnChanges",value:function(n){n.imageSourceId&&(this.store.dispatch(C.a.loadImageSourceTokens({imageSourceId:this.imageSourceId})),this.imageSourceId$.next(this.imageSourceId))}},{key:"getTokenLabel",value:function(n){return n.label||n.value.slice(0,6)}},{key:"onSelectedFileIds",value:function(n){this.selectedFileIds=n;var e=Array.from(n||[])[0];this.selectToken.emit(this.imageTokensById[e])}}]),n}(),y=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   dwu-file-explorer[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function k(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),o.sb(1,0,null,null,2,"dwu-file-explorer",[],null,[[null,"filesByIdChange"],[null,"selectedFileIdsChange"]],(function(n,e,t){var o=!0,l=n.component;return"filesByIdChange"===e&&(o=!1!==(l.fileGroup.filesById=t)&&o),"selectedFileIdsChange"===e&&(o=!1!==l.onSelectedFileIds(t)&&o),o}),b.b,b.a)),o.Ib(512,null,d.c,d.c,[[2,d.d]]),o.rb(3,4898816,null,0,p.a,[d.c,o.k],{rootFileId:[0,"rootFileId"],fuzzFilterString:[1,"fuzzFilterString"],filesById:[2,"filesById"],selectedFileIds:[3,"selectedFileIds"],perfMode:[4,"perfMode"]},{filesByIdChange:"filesByIdChange",selectedFileIdsChange:"selectedFileIdsChange"})],(function(n,e){var t=e.component;n(e,3,0,t.fileGroup.rootFileId,t.filterStr,t.fileGroup.filesById,t.selectedFileIds,!0)}),null)}function v(n){return o.Nb(0,[(n()(),o.hb(16777216,null,null,2,null,k)),o.rb(1,16384,null,0,a.m,[o.O,o.L],{ngIf:[0,"ngIf"]},null),o.Fb(131072,a.b,[o.h])],(function(n,e){var t=e.component;n(e,1,0,o.Mb(e,1,0,o.Db(e,2).transform(t.imageTokens$)))}),null)}var I=function(){function n(e){_classCallCheck(this,n),this.store=e,this.selectedImageSourceId$=this.store.pipe(Object(h.B)(C.f)),this.isGeneratingToken$=this.store.pipe(Object(h.B)(C.d))}return _createClass(n,[{key:"generateImageSourceToken",value:function(n){this.store.dispatch(C.a.generateImageSourceToken({payload:n}))}},{key:"getUsage",value:function(n){return"const Piper = require('picture-piper').Piper;\nconst secret = require('./secret.json');\n\nconst piper = new Piper(secret);\npiper.send(imageBlob);\n"}},{key:"getSecretJson",value:function(n){return'{\n  "sourceId": "'.concat(n,'",\n  "token": "').concat(this.selectedToken&&this.selectedToken.value,'",\n}\n')}},{key:"onSelectToken",value:function(n){this.selectedToken=n}}]),n}(),x=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:1rem 1.25rem;height:100%;width:100%}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]{flex:1 1 0;padding-bottom:5rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   dwu-code-snippet[_ngcontent-%COMP%]{margin:.5rem 1rem;max-width:40rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0 0}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]{margin-top:1rem;flex:1 1 0;width:100%;min-height:15rem;display:flex}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]{background-color:#ddd9cf;display:flex;flex-direction:column;width:10rem}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .explorer-title[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;padding-top:.5rem}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button-container[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[_ngcontent-%COMP%]{flex:1 1 0;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{flex:0 0 auto;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;height:26px;display:flex;align-items:center}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1rem}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .file-explorer[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;border:1px solid #ddd9cf;overflow:scroll;display:flex;flex-direction:column}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   dwu-code-snippet[_ngcontent-%COMP%]{margin:.5rem}"]],data:{}});function w(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),o.sb(1,0,null,null,1,"dwu-code-snippet",[],null,null,null,c.b,c.a)),o.rb(2,4767744,null,0,u.a,[o.k],{snippet:[0,"snippet"]},null),(n()(),o.sb(3,0,null,null,1,"dwu-code-snippet",[],null,null,null,c.b,c.a)),o.rb(4,4767744,null,0,u.a,[o.k],{snippet:[0,"snippet"]},null)],(function(n,e){var t=e.component;n(e,2,0,t.getUsage(e.parent.context.ngIf)),n(e,4,0,t.getSecretJson(e.parent.context.ngIf))}),null)}function T(n){return o.Nb(0,[(n()(),o.Lb(-1,null,[" Select a token for setup instructions "]))],null,null)}function S(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,13,null,null,null,null,null,null,null)),(n()(),o.sb(1,0,null,null,8,"div",[["class","file-explorer-container"]],null,null,null,null,null)),(n()(),o.sb(2,0,null,null,3,"div",[["class","control-buttons"]],null,null,null,null,null)),(n()(),o.sb(3,0,null,null,2,"div",[["class","wide-button"]],[[1,"disabled",0]],[[null,"click"]],(function(n,e,t){var o=!0;return"click"===e&&(o=!1!==n.component.generateImageSourceToken(n.context.ngIf)&&o),o}),null,null)),o.Fb(131072,a.b,[o.h]),(n()(),o.Lb(-1,null,["Regenerate Token"])),(n()(),o.sb(6,0,null,null,1,"dwu-search-input",[],null,[[null,"searchTextChange"]],(function(n,e,t){var o=!0;return"searchTextChange"===e&&(o=!1!==(n.component.filterStr=t)&&o),o}),s.b,s.a)),o.rb(7,49152,null,0,g.a,[],{searchText:[0,"searchText"],placeholder:[1,"placeholder"]},{searchTextChange:"searchTextChange"}),(n()(),o.sb(8,0,null,null,1,"dwu-image-source-tokens-list",[["class","file-explorer"]],null,[[null,"selectToken"]],(function(n,e,t){var o=!0;return"selectToken"===e&&(o=!1!==n.component.onSelectToken(t)&&o),o}),v,y)),o.rb(9,770048,null,0,M,[h.n],{imageSourceId:[0,"imageSourceId"],filterStr:[1,"filterStr"]},{selectToken:"selectToken"}),(n()(),o.sb(10,0,null,null,3,"div",[["class","right-side"]],null,null,null,null,null)),(n()(),o.hb(16777216,null,null,1,null,w)),o.rb(12,16384,null,0,a.m,[o.O,o.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),o.hb(0,[["noSelectedTokenTemplate",2]],null,0,null,T))],(function(n,e){var t=e.component;n(e,7,0,t.filterStr,"search.."),n(e,9,0,e.context.ngIf,t.filterStr),n(e,12,0,t.selectedToken,o.Db(e,13))}),(function(n,e){var t=e.component;n(e,3,0,!!o.Mb(e,3,0,o.Db(e,4).transform(t.isGeneratingToken$))||null)}))}function B(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),o.Lb(-1,null,["Setup Agent"])),(n()(),o.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.Lb(-1,null,[" The image source token grants write access to this image source. Make sure not to share these tokens in public repositories. Regenerate the token if you believe it may have been compromised.\n"])),(n()(),o.sb(4,0,null,null,3,"div",[["class","helper-container"]],null,null,null,null,null)),(n()(),o.hb(16777216,null,null,2,null,S)),o.rb(6,16384,null,0,a.m,[o.O,o.L],{ngIf:[0,"ngIf"]},null),o.Fb(131072,a.b,[o.h])],(function(n,e){var t=e.component;n(e,6,0,o.Mb(e,6,0,o.Db(e,7).transform(t.selectedImageSourceId$)))}),null)}var j=o.ob("dwu-image-source-setup",I,(function(n){return o.Nb(0,[(n()(),o.sb(0,0,null,null,1,"dwu-image-source-setup",[],null,null,null,B,x)),o.rb(1,49152,null,0,I,[h.n],null,null)],null,null)}),{},{},[]),F=t("s7LF"),A=t("0gVX"),L=t("kxb1"),z=t("O0RR"),R=t("FE7n"),$=t("Rkte"),N=t("mRcA"),D=t("R7F0"),E=t("a6Df"),G=t("IP0z"),J=t("/HVE"),q=t("hOhj"),V=t("FdjG"),H=t("ntSj"),U=t("iInd"),W=_createClass((function n(){_classCallCheck(this,n)}));t.d(e,"ImageSourceSetupModuleNgFactory",(function(){return K}));var K=o.pb(l,[],(function(n){return o.Ab([o.Bb(512,o.j,o.ab,[[8,[r.a,i.a,j]],[3,o.j],o.v]),o.Bb(4608,a.o,a.n,[o.s,[2,a.A]]),o.Bb(4608,F.r,F.r,[]),o.Bb(135680,A.a,A.a,[o.j,o.g,o.p]),o.Bb(1073742336,a.c,a.c,[]),o.Bb(1073742336,L.a,L.a,[]),o.Bb(1073742336,F.q,F.q,[]),o.Bb(1073742336,F.h,F.h,[]),o.Bb(1073742336,z.a,z.a,[]),o.Bb(1073742336,R.a,R.a,[]),o.Bb(1073742336,$.a,$.a,[]),o.Bb(1073742336,N.a,N.a,[]),o.Bb(1073742336,D.a,D.a,[]),o.Bb(1073742336,E.a,E.a,[]),o.Bb(1073742336,d.b,d.b,[]),o.Bb(1073742336,G.a,G.a,[]),o.Bb(1073742336,J.b,J.b,[]),o.Bb(1073742336,q.h,q.h,[]),o.Bb(1073742336,V.a,V.a,[]),o.Bb(1073742336,H.a,H.a,[]),o.Bb(1073742336,U.p,U.p,[[2,U.u],[2,U.l]]),o.Bb(1073742336,W,W,[]),o.Bb(1073742336,l,l,[]),o.Bb(1024,U.j,(function(){return[[{path:"",component:I}]]}),[])])}))}}]);